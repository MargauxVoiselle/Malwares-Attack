typedef BOOL (*type_CheckRemoteDebuggerPresent)(HANDLE, PBOOL);

int _tmain(int argc, _TCHAR* argv[])
{
	int delta = 365130;
	char *p = (char *) Sleep;
	p = p - delta;

	type_CheckRemoteDebuggerPresent mafonction_CheckRemoteDebuggerPresent;
	mafonction_CheckRemoteDebuggerPresent = (type_CheckRemoteDebuggerPresent) p;

	BOOL debuggerPresent;
	//CheckRemoteDebuggerPresent(GetCurrentProcess(), &debuggerPresent);

	p(GetCurrentProcess(), &debuggerPresent);

	printf("Hello\n");
	printf("%d\n", debuggerPresent);
	while(1);
	exit(1);
}